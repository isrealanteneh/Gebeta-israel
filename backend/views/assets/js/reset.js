import"./style.global.js";import{s as c,b as p}from"./Verification.js";import{S as w,h as m}from"./SpinnerFullScreen.js";try{const t=c(["#app","#warning-txt","#new-pass","#confirm-new-pass","#reset-btn"]),i=w("Resetting Password"),s=t["#reset-btn"],n=t["#new-pass"],o=t["#confirm-new-pass"];s.addEventListener("click",r=>{if(r.preventDefault(),s.disabled=!0,s.classList.add("btn-disabled"),t["#warning-txt"].textContent="",n.classList.remove("warning-input"),o.classList.remove("warning-input"),!p(n.value)){t["#warning-txt"].textContent="Invalid password.",n.classList.add("warning-input"),s.disabled=!1,s.classList.remove("btn-disabled");return}if(n.value!==o.value){t["#warning-txt"].textContent="Confirm password doesn't match.",o.classList.add("warning-input"),s.disabled=!1,s.classList.remove("btn-disabled");return}t["#app"].appendChild(i);const d=window.location.pathname.split("/").pop();m.post(`/reset/${d}`,{password:n.value}).then(e=>{s.disabled=!1,s.classList.remove("btn-disabled"),i.remove(),(e==null?void 0:e.data)&&(t["#warning-txt"].textContent="Password has been reset. You can now log in.",setTimeout(()=>{window.location.href="/login.html"},2e3))}).catch(e=>{var l;const a=(l=e.response)==null?void 0:l.data;a&&(t["#warning-txt"].textContent=(a==null?void 0:a.msg)||""),s.disabled=!1,s.classList.remove("btn-disabled"),i.remove(),console.log(e)})})}catch(t){console.log(t)}
