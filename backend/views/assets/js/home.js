var de=Object.defineProperty;var he=(t,e,n)=>e in t?de(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var h=(t,e,n)=>he(t,typeof e!="symbol"?e+"":e,n);import"./style.global.js";import{a as ue,h as ot,s as z,S as me}from"./SpinnerFullScreen.js";const{Axios:Tn,AxiosError:fe,CanceledError:_n,isCancel:In,CancelToken:Mn,VERSION:Cn,all:Nn,Cancel:Yn,isAxiosError:Dn,spread:On,toFormData:Xn,AxiosHeaders:Gn,HttpStatusCode:Rn,formToJSON:Wn,getAdapter:Bn,mergeConfig:jn}=ue;function ge(t,e){const n=Object.create(null),s=t.split(",");for(let i=0;i<s.length;i++)n[s[i]]=!0;return i=>!!n[i]}function Bt(t){if(x(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=Bt(V(s)?ye(s):s);if(i)for(const o in i)e[o]=i[o]}return e}if(T(t))return t}const pe=/;(?![^(]*\))/g,ve=/:(.+)/;function ye(t){const e={};return t.split(pe).forEach(n=>{if(n){const s=n.split(ve);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function jt(t){let e="";if(V(t))e=t;else if(x(t))for(let n=0;n<t.length;n++){const s=jt(t[n]);s&&(e+=s+" ")}else if(T(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function X(t,e){if(t===e)return!0;let n=Pt(t),s=Pt(e);if(n||s)return!(!n||!s)&&t.getTime()===e.getTime();if(n=x(t),s=x(e),n||s)return!(!n||!s)&&function(i,o){if(i.length!==o.length)return!1;let a=!0;for(let r=0;a&&r<i.length;r++)a=X(i[r],o[r]);return a}(t,e);if(n=T(t),s=T(e),n||s){if(!n||!s||Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t){const o=t.hasOwnProperty(i),a=e.hasOwnProperty(i);if(o&&!a||!o&&a||!X(t[i],e[i]))return!1}}return String(t)===String(e)}function nt(t,e){return t.findIndex(n=>X(n,e))}const be={},we=Object.prototype.hasOwnProperty,vt=(t,e)=>we.call(t,e),x=Array.isArray,st=t=>qt(t)==="[object Map]",Pt=t=>t instanceof Date,V=t=>typeof t=="string",yt=t=>typeof t=="symbol",T=t=>t!==null&&typeof t=="object",Se=Object.prototype.toString,qt=t=>Se.call(t),bt=t=>V(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ft=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},xe=/-(\w)/g,Ee=Ft(t=>t.replace(xe,(e,n)=>n?n.toUpperCase():"")),ke=/\B([A-Z])/g,zt=Ft(t=>t.replace(ke,"-$1").toLowerCase()),At=t=>{const e=parseFloat(t);return isNaN(e)?t:e},at=new WeakMap,j=[];let Y;const Q=Symbol(""),Ht=Symbol("");function Pe(t,e=be){(function(s){return s&&s._isEffect===!0})(t)&&(t=t.raw);const n=function(s,i){const o=function(){if(!o.active)return s();if(!j.includes(o)){Vt(o);try{return wt.push(W),W=!0,j.push(o),Y=o,s()}finally{j.pop(),Kt(),Y=j[j.length-1]}}};return o.id=He++,o.allowRecurse=!!i.allowRecurse,o._isEffect=!0,o.active=!0,o.raw=s,o.deps=[],o.options=i,o}(t,e);return e.lazy||n(),n}function Ae(t){t.active&&(Vt(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let He=0;function Vt(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let W=!0;const wt=[];function Kt(){const t=wt.pop();W=t===void 0||t}function tt(t,e,n){if(!W||Y===void 0)return;let s=at.get(t);s||at.set(t,s=new Map);let i=s.get(n);i||s.set(n,i=new Set),i.has(Y)||(i.add(Y),Y.deps.push(i))}function rt(t,e,n,s,i,o){const a=at.get(t);if(!a)return;const r=new Set,c=l=>{l&&l.forEach(d=>{(d!==Y||d.allowRecurse)&&r.add(d)})};if(e==="clear")a.forEach(c);else if(n==="length"&&x(t))a.forEach((l,d)=>{(d==="length"||d>=s)&&c(l)});else switch(n!==void 0&&c(a.get(n)),e){case"add":x(t)?bt(n)&&c(a.get("length")):(c(a.get(Q)),st(t)&&c(a.get(Ht)));break;case"delete":x(t)||(c(a.get(Q)),st(t)&&c(a.get(Ht)));break;case"set":st(t)&&c(a.get(Q))}r.forEach(l=>{l.options.scheduler?l.options.scheduler(l):l()})}const $e=ge("__proto__,__v_isRef,__isVue"),Ut=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(yt)),Le=Jt(),Te=Jt(!0),$t=_e();function _e(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{const n=Array.prototype[e];t[e]=function(...s){const i=G(this);for(let a=0,r=this.length;a<r;a++)tt(i,0,a+"");const o=n.apply(i,s);return o===-1||o===!1?n.apply(i,s.map(G)):o}}),["push","pop","shift","unshift","splice"].forEach(e=>{const n=Array.prototype[e];t[e]=function(...s){wt.push(W),W=!1;const i=n.apply(this,s);return Kt(),i}}),t}function Jt(t=!1,e=!1){return function(n,s,i){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_raw"&&i===(t?e?Ye:Lt:e?Ne:Zt).get(n))return n;const o=x(n);if(!t&&o&&vt($t,s))return Reflect.get($t,s,i);const a=Reflect.get(n,s,i);return(yt(s)?Ut.has(s):$e(s))||(t||tt(n,0,s),e)?a:ct(a)?!o||!bt(s)?a.value:a:T(a)?t?function(r){return Qt(r,!0,Ce,null,Lt)}(a):J(a):a}}function Ie(t=!1){return function(e,n,s,i){let o=e[n];if(!t&&(s=G(s),o=G(o),!x(e)&&ct(o)&&!ct(s)))return o.value=s,!0;const a=x(e)&&bt(n)?Number(n)<e.length:vt(e,n),r=Reflect.set(e,n,s,i);return e===G(i)&&(a?((c,l)=>c!==l&&(c==c||l==l))(s,o)&&rt(e,"set",n,s):rt(e,"add",n,s)),r}}const Me={get:Le,set:Ie(),deleteProperty:function(t,e){const n=vt(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&n&&rt(t,"delete",e,void 0),s},has:function(t,e){const n=Reflect.has(t,e);return yt(e)&&Ut.has(e)||tt(t,0,e),n},ownKeys:function(t){return tt(t,0,x(t)?"length":Q),Reflect.ownKeys(t)}},Ce={get:Te,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},Zt=new WeakMap,Ne=new WeakMap,Lt=new WeakMap,Ye=new WeakMap;function De(t){return t.__v_skip||!Object.isExtensible(t)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>qt(e).slice(8,-1))(t))}function J(t){return t&&t.__v_isReadonly?t:Qt(t,!1,Me,null,Zt)}function Qt(t,e,n,s,i){if(!T(t)||t.__v_raw&&(!e||!t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const a=De(t);if(a===0)return t;const r=new Proxy(t,a===2?s:n);return i.set(t,r),r}function G(t){return t&&G(t.__v_raw)||t}function ct(t){return!!(t&&t.__v_isRef===!0)}const Oe=/^(spellcheck|draggable|form|list|type)$/,lt=({el:t,get:e,effect:n,arg:s,modifiers:i})=>{let o;s==="class"&&(t._class=t.className),n(()=>{let a=e();if(s)i!=null&&i.camel&&(s=Ee(s)),it(t,s,a,o);else{for(const r in a)it(t,r,a[r],o&&o[r]);for(const r in o)a&&r in a||it(t,r,null)}o=a})},it=(t,e,n,s)=>{if(e==="class")t.setAttribute("class",jt(t._class?[t._class,n]:n)||"");else if(e==="style"){n=Bt(n);const{style:i}=t;if(n)if(V(n))n!==s&&(i.cssText=n);else{for(const o in n)dt(i,o,n[o]);if(s&&!V(s))for(const o in s)n[o]==null&&dt(i,o,"")}else t.removeAttribute("style")}else t instanceof SVGElement||!(e in t)||Oe.test(e)?e==="true-value"?t._trueValue=n:e==="false-value"?t._falseValue=n:n!=null?t.setAttribute(e,n):t.removeAttribute(e):(t[e]=n,e==="value"&&(t._value=n))},Tt=/\s*!important$/,dt=(t,e,n)=>{x(n)?n.forEach(s=>dt(t,e,s)):e.startsWith("--")?t.setProperty(e,n):Tt.test(n)?t.setProperty(zt(e),n.replace(Tt,""),"important"):t[e]=n},C=(t,e)=>{const n=t.getAttribute(e);return n!=null&&t.removeAttribute(e),n},L=(t,e,n,s)=>{t.addEventListener(e,n,s)};let ht=!1;const q=[],Xe=Promise.resolve(),et=t=>Xe.then(t),_t=t=>{q.includes(t)||q.push(t),ht||(ht=!0,et(Ge))},Ge=()=>{for(let t=0;t<q.length;t++)q[t]();q.length=0,ht=!1},Re=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,We=["ctrl","shift","alt","meta"],Be={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>We.some(n=>t[`${n}Key`]&&!e[n])},te=({el:t,get:e,exp:n,arg:s,modifiers:i})=>{if(!s)return;let o=Re.test(n)?e(`(e => ${n}(e))`):e(`($event => { ${n} })`);if(s!=="mounted"){if(s==="unmounted")return()=>o();if(i){s==="click"&&(i.right&&(s="contextmenu"),i.middle&&(s="mouseup"));const a=o;o=r=>{if(!("key"in r)||zt(r.key)in i){for(const c in i){const l=Be[c];if(l&&l(r,i))return}return a(r)}}}L(t,s,o,i)}else et(o)},ee=({el:t,get:e,effect:n})=>{n(()=>{t.textContent=ne(e())})},ne=t=>t==null?"":T(t)?JSON.stringify(t,null,2):String(t),$=t=>"_value"in t?t._value:t.value,It=(t,e)=>{const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e},je=t=>{t.target.composing=!0},qe=t=>{const e=t.target;e.composing&&(e.composing=!1,Fe(e,"input"))},Fe=(t,e)=>{const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)},Mt=Object.create(null),K=(t,e,n)=>se(t,`return(${e})`,n),se=(t,e,n)=>{const s=Mt[e]||(Mt[e]=ze(e));try{return s(t,n)}catch(i){console.error(i)}},ze=t=>{try{return new Function("$data","$el",`with($data){${t}}`)}catch(e){return console.error(`${e.message} in expression: ${t}`),()=>{}}},Ve={bind:lt,on:te,show:({el:t,get:e,effect:n})=>{const s=t.style.display;n(()=>{t.style.display=e()?s:"none"})},text:ee,html:({el:t,get:e,effect:n})=>{n(()=>{t.innerHTML=e()})},model:({el:t,exp:e,get:n,effect:s,modifiers:i})=>{const o=t.type,a=n(`(val) => { ${e} = val }`),{trim:r,number:c=o==="number"}=i||{};if(t.tagName==="SELECT"){const l=t;L(t,"change",()=>{const d=Array.prototype.filter.call(l.options,u=>u.selected).map(u=>c?At($(u)):$(u));a(l.multiple?d:d[0])}),s(()=>{const d=n(),u=l.multiple;for(let m=0,p=l.options.length;m<p;m++){const v=l.options[m],S=$(v);if(u)x(d)?v.selected=nt(d,S)>-1:v.selected=d.has(S);else if(X($(v),d))return void(l.selectedIndex!==m&&(l.selectedIndex=m))}u||l.selectedIndex===-1||(l.selectedIndex=-1)})}else if(o==="checkbox"){let l;L(t,"change",()=>{const d=n(),u=t.checked;if(x(d)){const m=$(t),p=nt(d,m),v=p!==-1;if(u&&!v)a(d.concat(m));else if(!u&&v){const S=[...d];S.splice(p,1),a(S)}}else a(It(t,u))}),s(()=>{const d=n();x(d)?t.checked=nt(d,$(t))>-1:d!==l&&(t.checked=X(d,It(t,!0))),l=d})}else if(o==="radio"){let l;L(t,"change",()=>{a($(t))}),s(()=>{const d=n();d!==l&&(t.checked=X(d,$(t)))})}else{const l=d=>r?d.trim():c?At(d):d;L(t,"compositionstart",je),L(t,"compositionend",qe),L(t,i!=null&&i.lazy?"change":"input",()=>{t.composing||a(l(t.value))}),r&&L(t,"change",()=>{t.value=t.value.trim()}),s(()=>{if(t.composing)return;const d=t.value,u=n();document.activeElement===t&&l(d)===u||d!==u&&(t.value=u)})}},effect:({el:t,ctx:e,exp:n,effect:s})=>{et(()=>s(()=>se(e.scope,n,t)))}},ie=(t,e={})=>{const n=t.scope,s=Object.create(n);Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)),s.$refs=Object.create(n.$refs);const i=J(new Proxy(s,{set:(o,a,r,c)=>c!==i||o.hasOwnProperty(a)?Reflect.set(o,a,r,c):Reflect.set(n,a,r)}));return{...t,scope:i}},Ke=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Ct=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Ue=/^\(|\)$/g,Je=/^[{[]\s*((?:[\w_$]+\s*,?\s*)+)[\]}]$/,Ze=(t,e,n)=>{const s=e.match(Ke);if(!s)return;const i=t.nextSibling,o=t.parentElement,a=new Text("");o.insertBefore(a,t),o.removeChild(t);const r=s[2].trim();let c,l,d,u,m=s[1].trim().replace(Ue,"").trim(),p=!1,v="key",S=t.getAttribute(v)||t.getAttribute(v=":key")||t.getAttribute(v="v-bind:key");S&&(t.removeAttribute(v),v==="key"&&(S=JSON.stringify(S))),(u=m.match(Ct))&&(m=m.replace(Ct,"").trim(),l=u[1].trim(),u[2]&&(d=u[2].trim())),(u=m.match(Je))&&(c=u[1].split(",").map(_=>_.trim()),p=m[0]==="[");let E,P,D,A=!1;const O=(_,I,f,b)=>{const g={};c?c.forEach((B,M)=>g[B]=I[p?M:B]):g[m]=I,b?(l&&(g[l]=b),d&&(g[d]=f)):l&&(g[l]=f);const y=ie(n,g),H=S?K(y.scope,S):f;return _.set(H,f),{ctx:y,key:H}},Z=({ctx:_,key:I},f)=>{const b=new St(t,_);return b.key=I,b.insert(o,f),b};return n.effect(()=>{const _=K(n.scope,r),I=D;if([P,D]=(f=>{const b=new Map,g=[];if(x(f))for(let y=0;y<f.length;y++)g.push(O(b,f[y],y));else if(typeof f=="number")for(let y=0;y<f;y++)g.push(O(b,y+1,y));else if(T(f)){let y=0;for(const H in f)g.push(O(b,f[H],y++,H))}return[g,b]})(_),A){const f=[];for(let g=0;g<E.length;g++)D.has(E[g].key)||E[g].remove();let b=P.length;for(;b--;){const g=P[b],y=I.get(g.key),H=P[b+1],B=H&&I.get(H.key),M=B==null?void 0:E[B];if(y==null)f[b]=Z(g,M?M.el:a);else{const kt=f[b]=E[y];Object.assign(kt.ctx.scope,g.ctx.scope),y!==b&&E[y+1]!==M&&kt.insert(o,M?M.el:a)}}E=f}else E=P.map(f=>Z(f,a)),A=!0}),i},oe=({el:t,ctx:{scope:{$refs:e}},get:n,effect:s})=>{let i;return s(()=>{const o=n();e[o]=t,i&&o!==i&&delete e[i],i=o}),()=>{i&&delete e[i]}},ae=t=>{const e={...t,scope:t?t.scope:J({}),dirs:t?t.dirs:{},effects:[],blocks:[],cleanups:[],effect:n=>{if(ut)return _t(n),n;const s=Pe(n,{scheduler:()=>_t(s)});return e.effects.push(s),s}};return e},Qe=/^(?:v-|:|@)/,tn=/\.([\w-]+)/g,en=/\{\{([^]+?)\}\}/g;let ut=!1;const re=(t,e)=>{const n=t.nodeType;if(n===1){const s=t;if(s.hasAttribute("v-pre"))return;let i;if(i=C(s,"v-if"))return((r,c,l)=>{const d=r.parentElement,u=new Comment("v-if");d.insertBefore(u,r);const m=[{exp:c,el:r}];let p,v;for(;(p=r.nextElementSibling)&&(v=null,C(p,"v-else")===""||(v=C(p,"v-else-if")));)d.removeChild(p),m.push({exp:v,el:p});const S=r.nextSibling;let E;d.removeChild(r);let P=-1;const D=()=>{E&&(d.insertBefore(u,E.el),E.remove(),E=void 0)};return l.effect(()=>{for(let A=0;A<m.length;A++){const{exp:O,el:Z}=m[A];if(!O||K(l.scope,O))return void(A!==P&&(D(),E=new St(Z,l),E.insert(d,u),d.removeChild(u),P=A))}P=-1,D()}),S})(s,i,e);if(i=C(s,"v-for"))return Ze(s,i,e);if((i=C(s,"v-scope"))||i===""){const r=i?K(e.scope,i):{};e=ie(e,r),r.$template&&nn(s,r.$template)}const o=C(s,"v-once")!=null;let a;o&&(ut=!0),(i=C(s,"ref"))&&mt(s,oe,`"${i}"`,e),Nt(s,e);for(const{name:r,value:c}of[...s.attributes])Qe.test(r)&&r!=="v-cloak"&&(r==="v-model"?a=c:Yt(s,r,c,e));a&&Yt(s,"v-model",a,e),o&&(ut=!1)}else if(n===3){const s=t.data;if(s.includes("{{")){let i,o=[],a=0;for(;i=en.exec(s);){const r=s.slice(a,i.index);r&&o.push(JSON.stringify(r)),o.push(`$s(${i[1]})`),a=i.index+i[0].length}a<s.length&&o.push(JSON.stringify(s.slice(a))),mt(t,ee,o.join("+"),e)}}else n===11&&Nt(t,e)},Nt=(t,e)=>{let n=t.firstChild;for(;n;)n=re(n,e)||n.nextSibling},Yt=(t,e,n,s)=>{let i,o,a,r=null;for(;r=tn.exec(e);)(a||(a={}))[r[1]]=!0,e=e.slice(0,r.index);if(e[0]===":")i=lt,o=e.slice(1);else if(e[0]==="@")i=te,o=e.slice(1);else{const c=e.indexOf(":"),l=c>0?e.slice(2,c):e.slice(2);i=Ve[l]||s.dirs[l],o=c>0?e.slice(c+1):void 0}i&&(i===lt&&o==="ref"&&(i=oe),mt(t,i,n,s,o,a),t.removeAttribute(e))},mt=(t,e,n,s,i,o)=>{const a=e({el:t,get:(r=n)=>K(s.scope,r,t),effect:s.effect,ctx:s,exp:n,arg:i,modifiers:o});a&&s.cleanups.push(a)},nn=(t,e)=>{if(e[0]!=="#")t.innerHTML=e;else{const n=document.querySelector(e);t.appendChild(n.content.cloneNode(!0))}};class St{get el(){return this.start||this.template}constructor(e,n,s=!1){this.isFragment=e instanceof HTMLTemplateElement,s?this.template=e:this.isFragment?this.template=e.content.cloneNode(!0):this.template=e.cloneNode(!0),s?this.ctx=n:(this.parentCtx=n,n.blocks.push(this),this.ctx=ae(n)),re(this.template,this.ctx)}insert(e,n=null){if(this.isFragment)if(this.start){let s,i=this.start;for(;i&&(s=i.nextSibling,e.insertBefore(i,n),i!==this.end);)i=s}else this.start=new Text(""),this.end=new Text(""),e.insertBefore(this.end,n),e.insertBefore(this.start,this.end),e.insertBefore(this.template,this.end);else e.insertBefore(this.template,n)}remove(){if(this.parentCtx&&((e,n)=>{const s=e.indexOf(n);s>-1&&e.splice(s,1)})(this.parentCtx.blocks,this),this.start){const e=this.start.parentNode;let n,s=this.start;for(;s&&(n=s.nextSibling,e.removeChild(s),s!==this.end);)s=n}else this.template.parentNode.removeChild(this.template);this.teardown()}teardown(){this.ctx.blocks.forEach(e=>{e.teardown()}),this.ctx.effects.forEach(Ae),this.ctx.cleanups.forEach(e=>e())}}const ce=t=>{const e=ae();let n;return t&&(e.scope=J(t)),e.scope.$s=ne,e.scope.$nextTick=et,e.scope.$refs=Object.create(null),{directive(s,i){return i?(e.dirs[s]=i,this):e.dirs[s]},mount(s){if(typeof s=="string"&&!(s=document.querySelector(s)))return;let i;return i=(s=s||document.documentElement).hasAttribute("v-scope")?[s]:[...s.querySelectorAll("[v-scope]")].filter(o=>!o.matches("[v-scope] [v-scope]")),i.length||(i=[s]),n=i.map(o=>new St(o,e,!0)),[s,...s.querySelectorAll("[v-cloak]")].forEach(o=>o.removeAttribute("v-cloak")),this},unmount(){n.forEach(s=>s.teardown())}}};let Dt;(Dt=document.currentScript)&&Dt.hasAttribute("init")&&ce().mount();class sn{constructor(e){h(this,"accessToken");this.accessToken=e}fetchActivePlayers(){return new Promise((e,n)=>{ot.get("/players/active",{headers:{Authorization:`Bearer ${this.accessToken}`}}).then(s=>{if(s.data){const i=s.data,o=Array.isArray(i.result)?i.result:[];e(o)}else e([])}).catch(s=>{n(s)})})}fetchActiveTournaments(){return new Promise((e,n)=>{ot.get("/tournaments/active",{headers:{Authorization:`Bearer ${this.accessToken}`}}).then(s=>{if(s.data){const i=s.data,o=Array.isArray(i.result)?i.result:[];e(o)}else e([])}).catch(s=>{n(s)})})}}const ft=16,U=(t,e,n)=>{const s=document.createElement("div");s.classList.add("notification"),s.innerHTML=`
        <div class="content">
            <h4 class="title open-sans-500">${t}</h4>
            <p class="description open-sans-300">${e}</p>
        </div>
        <button class="close open-sans-300" aria-label="Dismiss notification">Close</button>
    `,s.querySelector(".close").addEventListener("click",on),s.style.top=`${ft}px`,n==null||n.prepend(s);const o=s.offsetHeight;Array.from(document.querySelectorAll(".notification")).slice(1).forEach(r=>{const c=r;c.style.top=`${parseInt(c.style.top)+o+ft}px`})},on=t=>{const n=t.currentTarget.parentNode,s=n.offsetHeight,i=[];let o=n.nextElementSibling;for(;o&&o.matches(".notification");)i.push(o),o=o.nextElementSibling;i.forEach(a=>{const r=a;r.style.top=`${parseInt(r.style.top)-s-ft}px`}),n.classList.add("animate-out"),n.addEventListener("animationend",()=>{n.remove()})};class an{constructor(e){h(this,"gebeta");h(this,"gameState",{});h(this,"thisPlayer",{});this.gebeta=e}}class rn extends an{constructor(n){super(n);h(this,"appContainer");this.registerHooks(),this.appContainer=document.querySelector("#app")}setPlayer(n){console.log("setPlayer",n),this.thisPlayer=n}setGameState(n){console.log("setGameState",n),this.gameState=n}update(){requestAnimationFrame(this.gebeta.update.bind(this.gebeta))}start(){console.log("Gebeta Game started in Lamie-Weled Mode"),this.gebeta.start()}registerHooks(){this.gebeta.takeFunction=this.takeFunction.bind(this),this.gebeta.beforeTakeHook=this.beforeTakeHook.bind(this),this.gebeta.landedOnEmptyPitHook=this.landedOnEmptyPitHook.bind(this),this.gebeta.landedOnNonEmptyPitHook=this.landedOnNonEmptyPitHook.bind(this),this.gebeta.pitRepopulatedHook=this.pitRepopulatedHook.bind(this)}takeFunction(n){return n}beforeTakeHook(n){if(console.log("Before Take Hook"),console.log("Pit: ",n.whichPit()),console.log("Stone Count: ",n.getStones().length),console.log("Lamie weled",this.gameState),this.gameState!=null&&this.gameState.gameStatus.turn===this.thisPlayer.id){if(!this.gebeta.isAnimating&&!this.gebeta.hand.moveHand)return this.gameState.gameStatus.move.push(n.whichPit()),z.emit("player:move",{...this.gameState}),!0;if(this.gebeta.isDrawGo){const s=this.gebeta.drawGoList.find(i=>i.whichPit()===n.whichPit());if(s!==void 0){const i=s.getStones().length;this.gameState.challengee.id===this.thisPlayer.id&&(this.gameState.challengee.cupture+=i),this.gameState.challenger.id===this.thisPlayer.id&&(this.gameState.challenger.cupture+=i),z.emit("player:captured",{...this.gameState},{capturedPit:s.whichPit()},o=>{o&&s.flushStones()})}return!1}}return U("Illegal Move","It is not your turn!",this.appContainer),!1}landedOnEmptyPitHook(n){console.log("Pit: ",n.whichPit()),this.gebeta.isDrawGo=!1,this.gebeta.drawGoList=[],this.gameState.gameStatus.turn!==this.thisPlayer.id?(console.log("condition one"),this.gameState.gameStatus.turn=this.thisPlayer.id):this.gameState.gameStatus.turn===this.thisPlayer.id&&(console.log("condition two"),this.gameState.gameStatus.turn=this.thisPlayer.id===this.gameState.challengee.id?this.gameState.challenger.id:this.gameState.challengee.id)}landedOnNonEmptyPitHook(n){return console.log("Landed On Non Empty Pit Hook"),console.log("Pit: ",n.whichPit()),console.log("Stone Count: ",n.getStones().length),!0}pitRepopulatedHook(n){n.getStones().length===4&&(this.gebeta.isDrawGo=!0,this.gebeta.drawGoList.push(n))}}class cn{static create(e,n){switch(e){case"lamie-weled":return new rn(n);default:throw new Error("Invalid game mode")}}}var xt=(t=>(t.LM="lamie-weled",t))(xt||{});let w=J({page:"home",tournaments:[],players:[],user:{name:"Unknown",id:"no-id",username:"@unknown"},game:{gameId:"",challenger:{id:"",name:"",username:""},challengee:{id:"",name:"",username:""},gameMode:xt.LM,gameStatus:{turn:"",move:Array()}},setGame(t){this.game=t},setUser(t){this.user=t},setPage(t){this.page=t},setTournaments(t){this.tournaments=t},setPlayers(t){this.players=t},addPlayer(t){this.players.push(t)},addTournamet(t){this.tournaments.push(t)},removePlayer(t){this.players=this.players.filter(e=>e.id!==t)},removeTournament(t){this.tournaments=this.tournaments.filter(e=>e.id!==t)}});function ln(t){return new Promise((e,n)=>{const s=new Image;s.src="/assets/"+t,s.onload=()=>{e(s)},s.onerror=()=>{n(new Error("Couldn't load the img."))}})}function dn(t){return Promise.all(t.map(e=>ln(e)))}const k={pitSize:{rad:67,startingAngle:0,endingAngle:2*Math.PI,cCw:!0},boardDimention:{sX:0,sY:0,sWidth:1280,sHeight:356,dX:0,dY:0,dWidth:1280,dHeight:356},stoneDimention:{sX:0,sY:0,sWidth:815,sHeight:831,dX:241,dY:250.5,dWidth:40,dHeight:40},handDimention:{sX:0,sY:0,sWidth:851,sHeight:1060,dX:241,dY:250.5,dWidth:70,dHeight:95},pitsDimention:[{dX:241,dY:250.5},{dX:400,dY:250.5},{dX:559,dY:250.5},{dX:720,dY:250.5},{dX:879,dY:250.5},{dX:1038,dY:250.5},{dX:1038,dY:104.5},{dX:879,dY:104.5},{dX:720,dY:104.5},{dX:559,dY:104.5},{dX:400,dY:104.5},{dX:241,dY:104.5}]};class hn{constructor(e,n,s){h(this,"ctx");h(this,"boardImg");h(this,"dim");this.ctx=e,this.boardImg=n,this.dim=s||k.boardDimention}draw(){var e;(e=this.ctx)==null||e.drawImage(this.boardImg,this.dim.sX,this.dim.sY,this.dim.sWidth,this.dim.sHeight,this.dim.dX,this.dim.dY,this.dim.dWidth,this.dim.dHeight)}}const un=30,Ot=15,mn=250.5-104.5,fn=104.5-250.5;class Xt{constructor(e,n,s){h(this,"pits");h(this,"canv");h(this,"cbFunc");this.pits=e,this.canv=n,this.cbFunc=s}eventCallback(e){const n=this.canv.getBoundingClientRect();let s,i;e instanceof MouseEvent?(s=e.clientX-n.left,i=e.clientY-n.top):(s=e.clientX,i=e.clientY);for(let o of this.pits){const a=o.getDimention();if(a){const r=s-a.dX,c=i-a.dY;if(Math.sqrt(r*r+c*c)<=a.rad){this.cbFunc(o);break}}else return}}}class gn{constructor(e,n){h(this,"ctx");h(this,"handImg");h(this,"dimention",{...k.handDimention});h(this,"moveHand",!1);h(this,"sPit",null);h(this,"dPit",null);h(this,"cycles",0);h(this,"currentCycle",0);h(this,"overPit",null);h(this,"totalSteps",0);this.ctx=e,this.handImg=n}draw(e){var n;(n=this.ctx)==null||n.drawImage(this.handImg,e.sX,e.sY,e.sWidth,e.sHeight,e.dX-20,e.dY-20,e.dWidth,e.dHeight),this.dimention={...e}}calculateHandMovement(){let e={x:Ot,y:0,height:0,width:0};return this.dimention.dX<=k.pitsDimention[11].dX&&this.dimention.dY==k.pitsDimention[11].dY?(e.x=0,e.y=mn,this.currentCycle+=1):this.dimention.dX>=k.pitsDimention[5].dX&&this.dimention.dY==k.pitsDimention[5].dY?(e.x=0,e.y=fn):this.dimention.dY<=k.pitsDimention[6].dY&&(e.x=-Ot,e.y=0),e}update(e){if(this.moveHand){if(!this.dPit)return;let n=this.calculateHandMovement();this.dimention.dX+=n.x,this.dimention.dY+=n.y,this.dimention.dWidth+=n.width,this.dimention.dHeight+=n.height,e.eventCallback({clientX:this.dimention.dX,clientY:this.dimention.dY}),this.draw(this.dimention)}this.moveHand=this.totalSteps!==0}getDimention(){return this.dimention}}class pn{constructor(e,n){h(this,"ctx");h(this,"dimention",null);h(this,"num",0);h(this,"stones");this.ctx=e,this.stones=n||[]}draw(e){this.ctx.beginPath(),this.ctx!==null&&(this.ctx.strokeStyle="transparent"),this.ctx.arc(e.dX,e.dY,e.rad,e.startingAngle,e.endingAngle,e.cCw),this.ctx.stroke(),this.dimention={...e}}drawError(){this.ctx!==null&&this.dimention&&(this.ctx.strokeStyle="#c82d2d",this.ctx.beginPath(),this.ctx.arc(this.dimention.dX,this.dimention.dY,this.dimention.rad,this.dimention.startingAngle,this.dimention.endingAngle,this.dimention.cCw),this.ctx.lineWidth=5,this.ctx.stroke())}drawCoution(){this.ctx!==null&&this.dimention&&(this.ctx.strokeStyle="orange",this.ctx.beginPath(),this.ctx.arc(this.dimention.dX,this.dimention.dY,this.dimention.rad,this.dimention.startingAngle,this.dimention.endingAngle,this.dimention.cCw),this.ctx.lineWidth=5,this.ctx.stroke())}drawGo(){this.ctx!==null&&this.dimention&&(this.ctx.strokeStyle="#19b435",this.ctx.beginPath(),this.ctx.arc(this.dimention.dX,this.dimention.dY,this.dimention.rad,this.dimention.startingAngle,this.dimention.endingAngle,this.dimention.cCw),this.ctx.lineWidth=5,this.ctx.stroke())}getDimention(){return this.dimention}setWhich(e){this.num=e}whichPit(){return this.num}setStones(e){this.stones=e}addStone(e){this.stones.push(e)}getStones(){return this.stones}flushStones(){this.stones.length=0}}class Gt{constructor(e,n){h(this,"ctx");h(this,"stoneImg");h(this,"dimention",null);this.ctx=e,this.stoneImg=n}draw(e){var n;(n=this.ctx)==null||n.drawImage(this.stoneImg,e.sX,e.sY,e.sWidth,e.sHeight,e.dX,e.dY,e.dWidth,e.dHeight),this.dimention={...e}}getDimention(){return this.dimention}}class vn{constructor(e,n,s){h(this,"canv");h(this,"ctx");h(this,"assets");h(this,"pits");h(this,"lastTimeStamp",0);h(this,"board");h(this,"isAnimating",!1);h(this,"hand");h(this,"takeFunction",e=>e);h(this,"beforeTakeHook",e=>!0);h(this,"landedOnEmptyPitHook",e=>e);h(this,"landedOnNonEmptyPitHook",e=>!0);h(this,"pitRepopulatedHook",()=>{});h(this,"isDrawGo",!1);h(this,"drawGoList",[]);h(this,"handEventListener");h(this,"flipFlop",!1);this.canv=e,this.ctx=n,this.assets=s,this.pits=[],this.board=new hn(this.ctx,this.assets[0]),this.hand=new gn(this.ctx,this.assets[1])}start(){this.board.draw(),this.initializePits(),this.setupEventListener()}initializePits(){for(let e=0;e<12;e++){const n=new pn(this.ctx);n.draw({...k.pitsDimention[e],...k.pitSize}),this.populatePit(n,4),n.setWhich(e),this.pits.push(n)}}setupEventListener(){const e=new Xt(this.pits,this.canv,n=>{try{this.beforeTakeHook(n)===!0&&this.animateHand(n)}catch{}});this.canv.addEventListener("click",e.eventCallback.bind(e)),this.handEventListener=new Xt(this.pits,this.canv,n=>{if(n==null||n.whichPit()===this.hand.sPit.whichPit()&&this.hand.currentCycle===0){this.isAnimating=!1,this.hand.moveHand=!1,this.hand.overPit=null,this.isDrawGo=!1,this.drawGoList=[];return}if(this.hand.overPit==null||n.whichPit()!==this.hand.overPit.whichPit()){this.hand.overPit=n;let s=this.hand.overPit.getStones().length+1;this.hand.totalSteps-=1,this.hand.overPit.flushStones(),this.populatePit(this.hand.overPit,s),this.pitRepopulatedHook(this.hand.overPit)}if(this.hand.totalSteps===0){const s=this.hand.overPit.getStones().length;s===1?this.landedOnEmptyPitHook(this.hand.overPit):s>1&&this.landedOnNonEmptyPitHook(this.hand.overPit)===!0&&this.animateHand(this.hand.overPit),this.hand.moveHand=!1,this.isAnimating=!1,this.hand.overPit=null}})}populatePit(e,n){let s={...k.stoneDimention};if(!s||!s.dWidth||!s.dHeight){console.error("Invalid stone dimensions");return}if(n<=0){console.error("Invalid stone count");return}if(!e.getDimention()){console.error("Pit dimension is null or undefined");return}n===1?this.populateSingleStone(e,s):this.populateMultipleStones(e,n,s)}populateSingleStone(e,n){let s=e.getDimention();if(s){n.dX=s.dX-n.dWidth/2,n.dY=s.dY-n.dHeight/2;let i=new Gt(this.ctx,this.assets[2]);i.draw(n),e.addStone(i)}}populateMultipleStones(e,n,s){const i=k.pitSize.rad-s.dWidth/2;let o=0,a=1;for(;n>0;){o++;let r=o*(s.dWidth/2*a);if(r>i)break;let c=Math.floor(2*Math.PI*r/(a*(s.dWidth/2))),l=2*Math.PI/c;for(let d=0;d<c&&n>0;d++){const u=d*l,m=e.getDimention();if(!m){console.error("Pit dimension is null or undefined");return}const p=m.dX+r*Math.cos(u),v=m.dY+r*Math.sin(u);s.dX=p-s.dWidth/2,s.dY=v-s.dHeight/2;let S=new Gt(this.ctx,this.assets[2]);S.draw(s),e.addStone(S),n--}}}update(e){e-this.lastTimeStamp>=1e3/un&&(this.ctx.clearRect(0,0,this.canv.width,this.canv.height),this.board.draw(),this.updatePits(),this.isDrawGo&&this.drawGoList.forEach(s=>{s.drawGo()}),this.hand.update(this.handEventListener),this.lastTimeStamp=e),requestAnimationFrame(this.update.bind(this))}updatePits(){this.pits.forEach(e=>{e.draw(e.getDimention()),e.getStones().forEach(n=>{n.draw(n.getDimention())})})}stop(){}animateHand(e){if(this.isAnimating)return;this.isAnimating=!0;let n=this.takeFunction(e.getStones().length);if(n<=0||n>e.getStones().length)throw this.isAnimating=!1,Error("Invalid take amount. The amount of stones in a pit should be <= takeAmount.");let s=e.getStones().length-n,i=e.whichPit()+n,o=Math.floor(i/this.pits.length),a=i%this.pits.length;s===0?e.flushStones():(e.flushStones(),this.populatePit(e,s)),this.hand.sPit=e,this.hand.dimention.dX=e.getDimention().dX,this.hand.dimention.dY=e.getDimention().dY,this.hand.dPit=this.pits[a],this.hand.currentCycle=0,this.hand.cycles=o,this.hand.totalSteps=n,this.hand.moveHand=!0}}const N=class N{constructor(){h(this,"gebeta");h(this,"gameMode",null)}getGebeta(){return this.gebeta}setGebeta(e){this.gebeta=e}setGameMode(e){this.gameMode=e}getGameMode(){return this.gameMode}static getInstance(){return N.INSTANCE||(N.INSTANCE=new N),N.INSTANCE}};h(N,"INSTANCE",null);let R=N;async function yn(t,e){var s;console.log(e),t.width=k.boardDimention.dWidth,t.height=k.boardDimention.dHeight;const n=t.getContext("2d");try{if(n===null)throw alert("Your browser does not support HTML 5 canvas. Please upgrade your browser and try again."),new Error("Your browser does not support HTML 5 canvas. Please upgrade your browser and try again.");const i=me("Loading Game Assets");(s=document.querySelector("#app"))==null||s.appendChild(i);const o=await dn(["Light_Wooden_Board.jpg","hand.png","stone.png"]);i.remove();const a=new vn(t,n,o),r=cn.create(e,a),c={...w.game};c.challengee.cupture=0,c.challenger.cupture=0,c.gameStatus.move=[],r.setGameState(c),r.setPlayer({...w.user}),r.start(),r.update();const l=R.getInstance();l.setGebeta(a),l.setGameMode(r)}catch(i){console.error(i)}}function bn(){const t=sessionStorage.getItem("user");return t?JSON.parse(t):null}async function Et(t){const e=sessionStorage.getItem("refreshToken");if(!e){sessionStorage.clear(),window.location.href="/login.html";return}console.log(t);try{const n=await ot.post("/refresh-token",{refresh_token:e}),s=n==null?void 0:n.data;if(s.result&&"accessToken"in s.result){const i=s.result.accessToken||"";return sessionStorage.setItem("accessToken",i),i}}catch(n){console.log(n)}return null}const gt=16,wn=(t,e,n,s,i)=>{const o=document.createElement("div");o.classList.add("notification"),o.innerHTML=`
        <div class="content">
            <h4 class="title open-sans-500">${t}</h4>
            <p class="description open-sans-300">${e}</p>
        </div>
        <div class="actions">
            <button class="accept open-sans-300" aria-label="Accept request">Accept</button>
            <button class="reject open-sans-300" aria-label="Reject request">Reject</button>
        </div>
    `;const a=o.querySelector(".accept"),r=o.querySelector(".reject");a.addEventListener("click",()=>{s(),Rt(o)}),r.addEventListener("click",()=>{i(),Rt(o)}),o.style.top=`${gt}px`,n==null||n.prepend(o);const c=o.offsetHeight;Array.from(document.querySelectorAll(".notification")).slice(1).forEach(d=>{const u=d;u.style.top=`${parseInt(u.style.top)+c+gt}px`})},Rt=t=>{const e=t.offsetHeight,n=[];let s=t.nextElementSibling;for(;s&&s.matches(".notification");)n.push(s),s=s.nextElementSibling;n.forEach(i=>{const o=i;o.style.top=`${parseInt(o.style.top)-e-gt}px`}),t.classList.add("animate-out"),t.addEventListener("animationend",()=>{t.remove()})};function Sn(t,e){t.on("user-went-offline",n=>{w.removePlayer(n)}),t.on("user-went-online",n=>{n.id!=w.user.id&&w.addPlayer(n)}),t.on("challenge:faild",n=>{const s=n.challenge.challengee;U("Request Failed!",`${n.msg} <br> Request to ${s.name} failed.`,e)}),t.on("challenge:rejected",n=>{const s=n.challenge.challengee;U("Challenge Rejected!",`${n.msg} <br> Request to ${s.name} failed.`,e)}),t.on("challenge:incoming",n=>{wn("Incoming Challenge",`<b>${n.challenger.name}</b> has challenged you to ${n.gameMode} game.`,e,()=>{t.emit("challenge:accepted",n)},()=>{t.emit("challenge:rejected",n)})}),t.on("game:start",n=>{w.setGame(n),w.setPage("game"),console.log("Game Started",w.game)}),t.on("player:move",n=>{var o;const i=R.getInstance().getGebeta();if(i!==void 0){const a=n.gameStatus.move.pop();if(a!==void 0){const r=i.pits[a];if(r!==void 0){let c=(o=R.getInstance().getGameMode())==null?void 0:o.gameState;c&&(c={...n},c.gameStatus.move.push(a)),i.animateHand(r)}}}}),t.on("player:captured",n=>{const s=R.getInstance(),i=s.getGebeta(),o=s.getGameMode();if(i){console.log("Cuptured pit no:",n.capturedPit.capturedPit);const a=i.pits[n.capturedPit.capturedPit];console.log(a),a.flushStones()}o&&(o.gameState=n)}),t.on("disconnect",(n,s)=>console.log("reason",n,"desc",s)),t.on("connect_error",async n=>{n.message.includes("unauthorized")&&await Et(n),console.log("EX,",n)})}function xn({title:t,challengee:e,challenger:n,onContinue:s,onCancel:i}){const o=document.createElement("div");o.classList.add("challenge-menu-container");const a=document.createElement("h2");a.classList.add("title"),a.classList.add("open-sans-500"),a.textContent=t;const r=document.createElement("p");r.classList.add("description"),r.classList.add("open-sans-300"),r.innerHTML=`
        <fieldset>
            <legend>Challenger</legend>
            <div>
            <b>${n.name}</b> <br> @${n.username}
            </div>
        </fieldset>
        <fieldset>
            <legend>Challengee</legend>
            <div>
            <b>${e.name}</b> <br> @${e.username}
            </div>
        </fieldset>`;const c=document.createElement("select");c.classList.add("game-mode-dropdown"),Object.values(xt).forEach(m=>{const p=document.createElement("option");p.value=m,p.textContent=m,c.appendChild(p)});const l=document.createElement("div");l.classList.add("button-container");const d=document.createElement("button");d.classList.add("btn"),d.classList.add("btn-primary"),d.textContent="Continue",d.addEventListener("click",()=>{const m=c.value;s(m)});const u=document.createElement("button");return u.classList.add("btn"),u.classList.add("btn-secondary"),u.textContent="Cancel",u.addEventListener("click",i),l.append(d,u),o.append(a,r,c,l),o}const pt=16,En=(t,e,n)=>{const s=document.createElement("div");s.classList.add("notification"),s.innerHTML=`
        <div class="content">
            <h4 class="title open-sans-500">${t}</h4>
            <p class="description open-sans-300">${e}</p>
        </div>
        <button class="close open-sans-300" aria-label="Dismiss notification">Close</button>
    `,s.querySelector(".close").addEventListener("click",kn),s.style.top=`${pt}px`,n==null||n.prepend(s);const o=s.offsetHeight;Array.from(document.querySelectorAll(".notification")).slice(1).forEach(r=>{const c=r;c.style.top=`${parseInt(c.style.top)+o+pt}px`})},kn=t=>{const n=t.currentTarget.parentNode,s=n.offsetHeight,i=[];let o=n.nextElementSibling;for(;o&&o.matches(".notification");)i.push(o),o=o.nextElementSibling;i.forEach(a=>{const r=a;r.style.top=`${parseInt(r.style.top)-s-pt}px`}),n.classList.add("animate-out"),n.addEventListener("animationend",()=>{n.remove()})};let Wt=null;const F=document.querySelector("#app");function Pn(t){console.log(t)}async function le(t){var n,s,i;const e=new sn(t||"");try{const o=await e.fetchActivePlayers(),a=await e.fetchActiveTournaments();w.setPlayers(o.filter(r=>r.id!==w.user.id)),w.setTournaments(a)}catch(o){if(o instanceof fe&&((i=(s=(n=o.response)==null?void 0:n.data)==null?void 0:s.result)==null?void 0:i.code)===401){const a=await Et("Expired access token");a?le(a):window.location.href="login.html"}}}function An(t,e){var s,i;const n=w.players.find(o=>o.id===t);if((s=e.target)==null||s.setAttribute("disabled","true"),(i=e.target)==null||i.classList.add("btn-disabled"),n){const o=xn({title:"Challenge Menu",challengee:{id:n.id,username:n.username,name:n.name},challenger:{id:w.user.id,username:w.user.username,name:w.user.name},onContinue:a=>{var r,c;console.log(a),z.emit("challenge",{challenger:w.user,challengee:{id:t},gameMode:a}),o.remove(),(r=e.target)==null||r.removeAttribute("disabled"),(c=e.target)==null||c.classList.remove("btn-disabled"),En("Request Successfully sent!",`Your request to ${n.name} was sent successfully!`,F)},onCancel:()=>{var a,r;o.remove(),(a=e.target)==null||a.removeAttribute("disabled"),(r=e.target)==null||r.classList.remove("btn-disabled"),console.log("Cancel")}});F.appendChild(o)}else U("Error","Player not found in active player list.",F)}(async function(){const e=sessionStorage.getItem("accessToken");if(!e){const s=await Et("No access token found.");s==null&&(window.location.href="login.html")}Sn(z,F),z.on("connect",()=>console.log("connected"));const n=bn();n?(w.setUser(n),le(e||"")):U("User Info Error","Error while loading user info. Deserialized user info not found.",F),Wt=ce({challengePlayer:An,viewProfile:Pn,state:w,showGameView(){this.state.page==="game"&&(console.log("Game view is already active"),this.$nextTick(()=>{console.log(document.querySelector("#canv")),yn(document.querySelector("#canv"),this.state.game.gameMode)}))}}),Wt.mount("#app")})();
