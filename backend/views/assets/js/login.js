import"./style.global.js";import{s as c,a as d,i as m,b as g}from"./Verification.js";import{S as p,h as u}from"./SpinnerFullScreen.js";try{const e=c(["#app","#warning-txt","#email-username","#pass","#login-btn"]),l=p("Logging in"),t=e["#login-btn"],i=e["#email-username"],o=e["#pass"];t.addEventListener("click",r=>{if(r.preventDefault(),e["#warning-txt"].textContent="",i.classList.remove("warning-input"),o.classList.remove("warning-input"),!d(i.value)&&!m(i.value)){e["#warning-txt"].textContent="Invalid username or email.",i.classList.add("warning-input");return}if(!g(o.value)){e["#warning-txt"].textContent="Invalid password.",o.classList.add("warning-input");return}t.disabled=!0,t.classList.add("btn-disabled"),e["#app"].appendChild(l),u.post("/login",{email:i.value,password:o.value}).then(n=>{t.disabled=!1,t.classList.remove("btn-disabled"),l.remove();const a=n==null?void 0:n.data;if(a){const s=a.result;console.log(s.accessToken,s.refreshToken),sessionStorage.setItem("user",JSON.stringify(s.user)),sessionStorage.setItem("accessToken",s.accessToken||""),sessionStorage.setItem("refreshToken",s.refreshToken||""),window.location.href="/home"}}).catch(n=>{var s;const a=(s=n.response)==null?void 0:s.data;a?e["#warning-txt"].textContent=(a==null?void 0:a.msg)||"":e["#warning-txt"].textContent=n.message,t.disabled=!1,t.classList.remove("btn-disabled"),l.remove(),console.log(n)})})}catch(e){console.log(e)}
